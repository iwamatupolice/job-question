<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>岩松県警察｜巡回・職務質問記録票</title>
  <style>
    :root {
      --bg:#0b1020; --card:#11182d; --ink:#e7ecff; --muted:#b8c0de;
      --border:#203058; --ok:#4cd187;
    }
    html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,"Noto Sans JP","Hiragino Kaku Gothic ProN","Meiryo",sans-serif;}
    .wrap{max-width:1000px;margin:24px auto;padding:16px}
    .topbar{display:flex;gap:12px;align-items:center;justify-content:space-between;margin-bottom:12px}
    h1{font-size:1.35rem;margin:0}
    .badge{background:linear-gradient(90deg,#3556a8,#2b3f7a);padding:6px 10px;border-radius:999px;border:1px solid var(--border);font-size:.85rem;color:#dfe7ff}
    .card{background:var(--card);border:1px solid var(--border);border-radius:14px;padding:20px;margin:16px 0}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:16px}
    .g-12{grid-column:span 12}.g-9{grid-column:span 9}.g-8{grid-column:span 8}.g-6{grid-column:span 6}
    .g-4{grid-column:span 4}.g-3{grid-column:span 3}.g-2{grid-column:span 2}
    label{display:block;font-size:.85rem;color:var(--muted);margin-bottom:6px}
    input[type="text"],input[type="datetime-local"],input[type="number"],select,textarea{
      width:100%;box-sizing:border-box;background:#0c1326;color:var(--ink);
      border:1px solid var(--border);border-radius:10px;padding:10px 12px;font-size:.95rem}
    textarea{min-height:120px;resize:vertical}
    .tall{min-height:240px}
    fieldset{border:1px solid var(--border);border-radius:12px;padding:16px 18px}
    legend{color:var(--muted);font-size:.9rem;padding:0 6px}
    .row{display:flex;flex-wrap:wrap;gap:8px}
    .btns{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
    button{background:#1a2547;color:#eaf0ff;border:1px solid var(--border);padding:10px 14px;border-radius:10px;cursor:pointer}
    button.primary{background:linear-gradient(180deg,#4b77ff,#315bdf)}
    button.ok{background:#06361e;border-color:#0c6a3a}
    button.warn{background:#3a2a00;border-color:#5e4700}
    button.ghost{background:transparent}
    .pill{padding:4px 8px;border:1px solid var(--border);border-radius:999px;font-size:.8rem;color:#c8d3ff}
    .help{font-size:.8rem;color:#97a6d9}
    .hr{height:1px;background:var(--border);margin:8px 0}
    .hint{font-size:.8rem;color:#9fb2ff}
    .inline{display:inline-flex;gap:8px;align-items:center}
    select#demoSelect{min-width:180px}
    @media (max-width:720px){.grid{gap:18px}.g-9,.g-8,.g-6,.g-4,.g-3,.g-2{grid-column:span 12}}
    @media print{
      body{background:#fff;color:#000}
      .no-print{display:none!important}
      .card{border:1px solid #333;background:#fff;color:#000}
      input,select,textarea{border:1px solid #888;background:#fff;color:#000}
      .pill{border-color:#888;color:#000}
      a{color:#000}
    }
  </style>
  <!-- PNG出力用（CDN） -->
  <script defer src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body>
  <div class="wrap">
    <div class="topbar">
      <div class="inline">
        <h1>巡回・職務質問記録票</h1>
        <span id="recordId" class="pill">ID: —</span>
      </div>
      <span class="badge">岩松県警察 / 現場入力用フォーム</span>
    </div>

    <!-- 基本情報 -->
    <div class="card">
      <div class="grid">
        <div class="g-3"><label>所属</label><input id="aff" placeholder="例：響野署 地域課"></div>
        <div class="g-2"><label>階級</label><input id="rank" placeholder="例：巡査長"></div>
        <div class="g-3"><label>氏名</label><input id="name" placeholder="例：岩松 太郎"></div>
        <div class="g-2"><label>同行員</label><input id="mates" placeholder="例：2名（氏名略）"></div>
        <div class="g-2"><label>無線符号／車両</label><input id="unit" placeholder="例：響野21／パト1"></div>
      </div>
      <div class="grid">
        <div class="g-4">
          <label>実施区分</label>
          <select id="type">
            <option>巡回連絡</option><option selected>職務質問</option><option>補導</option><option>所持品検査</option>
          </select>
        </div>
        <div class="g-4"><label>開始時刻</label><input id="tStart" type="datetime-local"></div>
        <div class="g-4"><label>終了時刻</label><input id="tEnd" type="datetime-local"></div>
        <div class="g-12 help" id="durText">所要時間：—</div>
      </div>
    </div>

    <!-- 場所 -->
    <div class="card">
      <div class="grid">
        <div class="g-9"><label>場所（住所・目標物）</label><input id="place" placeholder="例：響野市中央1-2-3 ○○前 歩道上"></div>
        <div class="g-3"><label>天候</label><input id="weather" placeholder="例：晴れ"></div>
      </div>
    </div>

    <!-- 対象者情報 -->
    <div class="card">
      <fieldset class="g-12">
        <legend>対象者情報</legend>
        <div class="grid">
          <div class="g-4"><label>氏名（仮名可）</label><input id="pName"></div>
          <div class="g-2"><label>性別</label>
            <select id="pSex"><option>男</option><option>女</option><option>その他</option><option>不詳</option></select>
          </div>
          <div class="g-2"><label>年齢</label><input id="pAge" type="number" min="0"></div>
          <div class="g-2"><label>国籍</label><input id="pNat" placeholder="例：日本"></div>
          <div class="g-2"><label>同行者数</label><input id="pComp" type="number" min="0" value="0"></div>

          <div class="g-4"><label>職業・所属等</label><input id="pJob"></div>
          <div class="g-4"><label>連絡先</label><input id="pContact"></div>
          <div class="g-4"><label>本人確認方法</label><input id="pID" placeholder="例：運転免許証／学生証"></div>
        </div>
      </fieldset>

      <div class="hr"></div>

      <!-- 経過：統合（理由・質問応答・所持品検査） -->
      <div class="grid">
        <div class="g-12">
          <label>経過（理由・質問応答・所持品検査を含む）</label>
          <textarea id="progress" class="tall" placeholder="【観察事実・実施理由】…&#1
